<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendário</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</head>

<body>
  <h1>Calendário</h1>

  <div style="position: absolute; left: 0px; right: 0px; background: rgb(25, 25, 25); z-index: 85;">
    <div class="pagination" style="display: flex; height: 42px; align-items: center; margin-bottom: 2px;">
      <div style="font-weight: 600; margin-left: 8px; margin-right: 8px; line-height: 1; font-size: 14px;">
        abril de 2024
      </div>

      <div style="flex-grow: 1;"></div>

      <% if (currentPage> 1) { %>
      <!-- mes anterior -->
      <div role="button" tabindex="0" onclick="paginaAnterior()" class="btn btn-primary" style="user-select: none; transition: background 20ms ease-in; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; border-radius: 4px; height: 24px; width: 24px; padding: 0px;" aria-label="Mês anterior">
        <svg role="graphics-symbol" viewBox="0 0 16 16" style="width: 14px; height: 14px; display: block; fill: rgba(255, 255, 255, 0.445); flex-shrink: 0;" class="chevronLeft">
          <path d="M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z">
          </path>
        </svg>
      </div>
      <% } %>

      <div role="button" tabindex="0" onclick="irParaHoje()" style="user-select: none; transition: background 20ms ease-in; cursor: pointer; display: inline-flex; align-items: center; flex-shrink: 0; white-space: nowrap; height: 24px; border-radius: 4px; font-size: 14px; line-height: 1.2; min-width: 0px; padding-left: 6px; padding-right: 6px; color: rgba(255, 255, 255, 0.81);">
        Hoje <br> <span> Página <%= currentPage %></span>
      </div>

      <!-- proximo mes -->
      <div role="button" tabindex="0" onclick="proximaPagina()" class="btn btn-primary" style="user-select: none; transition: background 20ms ease-in; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; border-radius: 4px; height: 24px; width: 24px; padding: 0px;" aria-label="Próximo mês">
        <svg role="graphics-symbol" viewBox="0 0 16 16" style="width: 14px; height: 14px; display: block; fill: rgba(255, 255, 255, 0.445); flex-shrink: 0;" class="chevronRight">
          <path d="M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z">
          </path>
        </svg>
      </div>
    </div>

    <div style="display: flex; height: 42px; align-items: center; margin-bottom: 2px;">
      <!-- Cabeçalho do Calendário -->
      <div style="flex-grow: 1; flex-basis: 0px; text-align: center; font-size: 12px; height: 24px; color: rgba(255, 255, 255, 0.283);">dom.</div>
      <div style="flex-grow: 1; flex-basis: 0px; text-align: center; font-size: 12px; height: 24px; color: rgba(255, 255, 255, 0.283);">seg.</div>
      <div style="flex-grow: 1; flex-basis: 0px; text-align: center; font-size: 12px; height: 24px; color: rgba(255, 255, 255, 0.283);">ter.</div>
      <div style="flex-grow: 1; flex-basis: 0px; text-align: center; font-size: 12px; height: 24px; color: rgba(255, 255, 255, 0.283);">qua.</div>
      <div style="flex-grow: 1; flex-basis: 0px; text-align: center; font-size: 12px; height: 24px; color: rgba(255, 255, 255, 0.283);">qui.</div>
      <div style="flex-grow: 1; flex-basis: 0px; text-align: center; font-size: 12px; height: 24px; color: rgba(255, 255, 255, 0.283);">sex.</div>
      <div style="flex-grow: 1; flex-basis: 0px; text-align: center; font-size: 12px; height: 24px; color: rgba(255, 255, 255, 0.283);">sáb.</div>
    </div>
  </div>

  <div style="height: 66px;"></div>

  <% semanas.forEach(semana=> { %>
  <div>
    <% semana.forEach(dia=> { %>
    <div id="diasCalendario" class="dia-calendario mt-4" data-date="<%= dia.data.toISOString().slice(0, 10) %>" style="display: inline-block; width: calc(100% / 8); border: 1px solid #ccc; padding: 10px; box-sizing: border-box; cursor: pointer;">
      <%= new Date(dia.data).getDate() %> - <%= dia.diaDaSemana %>
    </div>
    <% }); %>
    <% for (let i=semana.length; i < 7; i++) { %>
    <div style="display: inline-block; width: calc(100% / 8); border: 1px solid #ccc; padding: 10px; box-sizing: border-box;">
    </div>
    <% } %>
  </div>
  <% }); %>


  <br>


  <!-- Modal -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalLabel">Nova Tarefa</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="/tarefas" method="POST">
            <label for="titulo">Título:</label>
            <input type="text" id="titulo" name="titulo" required><br>
            <label for="descricao">Descrição:</label>
            <textarea id="descricao" name="descricao" rows="4" cols="50" required></textarea><br>
            <label for="data">Data:</label>
            <input type="date" id="data" name="data" required><br>
            <label for="status">Status:</label>
            <select id="status" name="status">
              <option value="pendente">Pendente</option>
              <option value="concluido">Concluído</option>
            </select><br>
            <button type="submit">Salvar</button>
          </form>
        </div>
      </div>
    </div>
  </div>


  <!-- Div para exibir as tarefas -->
  <div id="listaTarefas" class="mt-4"></div>


  <!-- Modal para Edição de Tarefas -->
  <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editModalLabel">Editar Tarefa</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="editForm" style="display: none;" method="POST">
            <input type="hidden" id="editId" name="_id">
            <label for="editTitulo">Título:</label>
            <input type="text" id="editTitulo" name="titulo" required><br>
            <label for="editDescricao">Descrição:</label>
            <textarea id="editDescricao" name="descricao" rows="4" cols="50" required></textarea><br>
            <label for="editData">Data:</label>
            <input type="date" id="editData" name="data" required><br>
            <label for="editStatus">Status:</label>
            <select id="editStatus" name="status">
              <option value="pendente">Pendente</option>
              <option value="concluido">Concluído</option>
            </select><br>
            <button type="button" id="editSubmitButton">Salvar Alterações</button>
          </form>
        </div>
      </div>
    </div>
  </div>


  <!-- Modal para Deleção de Tarefas -->
  <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Confirmar Deleção</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="deleteForm" style="display: none;" method="POST">
            <input type="hidden" id="deleteId" name="_id">
            <button type="button" id="deleteSubmitButton">Confirmar Deleção</button>
          </form>
        </div>
      </div>
    </div>
  </div>


  <script src="/js/calendar.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>


</body>

</html>